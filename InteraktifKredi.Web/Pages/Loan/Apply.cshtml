@page
@model InteraktifKredi.Web.Pages.Loan.ApplyModel
@{
    ViewData["Title"] = "Kredi Başvurusu";
    Layout = "_Layout";
}

<div class="loan_apply_page">
    <div class="loan_apply_container">
        <div class="loan_apply_header">
            <h2 class="loan_apply_header__title">Kredi Başvurusu</h2>
            <p class="loan_apply_header__subtitle">Lütfen aşağıdaki bilgileri eksiksiz doldurun</p>
        </div>

    @if (!string.IsNullOrEmpty(Model.ErrorMessage))
    {
            <div class="alert alert--error">
            @Model.ErrorMessage
        </div>
    }

        <form method="post" id="loan_application_form" class="loan_apply_form" novalidate>
        <!-- Kredi Türü -->
            <div class="input_group" id="loan_type_group">
                <select asp-for="LoanRequest.LoanType" 
                        id="loan_type" 
                        class="input_group__field input_group__field--select" 
                        required>
                <option value="">Seçiniz</option>
                <option value="ihtiyac">İhtiyaç Kredisi</option>
                <option value="tasit">Taşıt Kredisi</option>
                <option value="konut">Konut Kredisi</option>
                <option value="ticari">Ticari Kredi</option>
            </select>
                <label for="loan_type" class="input_group__label">Kredi Türü</label>
                <span asp-validation-for="LoanRequest.LoanType" class="input_group__error"></span>
        </div>

        <!-- Kredi Tutarı - Slider -->
            <div class="input_group" id="loan_amount_group">
                <label for="loan_amount_slider" class="input_group__label input_group__label--static">
                    Kredi Tutarı
                </label>
                <div class="input_group__slider_display">
                    <span id="loan_amount_display">100.000</span> TL
                </div>
                <input type="range" 
                       id="loan_amount_slider" 
                       class="input_group__slider"
                       min="10000" 
                       max="1000000" 
                       step="1000"
                       value="100000" />
            <input type="hidden" 
                   asp-for="LoanRequest.LoanAmount" 
                   id="loan_amount" 
                   value="100000" />
                <span asp-validation-for="LoanRequest.LoanAmount" class="input_group__error"></span>
                <span class="input_group__helper">Minimum: 10.000 TL, Maksimum: 1.000.000 TL</span>
        </div>

        <!-- Kredi Vadesi -->
            <div class="input_group" id="loan_term_group">
                <select asp-for="LoanRequest.LoanTerm" 
                        id="loan_term" 
                        class="input_group__field input_group__field--select" 
                        required>
                <option value="">Seçiniz</option>
                <option value="12">12 ay</option>
                <option value="24">24 ay</option>
                <option value="36">36 ay</option>
                <option value="48">48 ay</option>
                <option value="60">60 ay</option>
            </select>
                <label for="loan_term" class="input_group__label">Kredi Vadesi</label>
                <span asp-validation-for="LoanRequest.LoanTerm" class="input_group__error"></span>
        </div>

        <!-- Meslek -->
            <div class="input_group" id="job_id_group">
                <select asp-for="LoanRequest.JobId" 
                        id="job_id" 
                        class="input_group__field input_group__field--select">
                <option value="">Seçiniz</option>
            </select>
                <label for="job_id" class="input_group__label">Meslek</label>
        </div>

        <!-- Dinamik Form - Kamu Çalışanı için ek alanlar -->
            <div id="public_employee_fields" class="loan_apply_form__dynamic_fields" style="display: none;">
                <div class="input_group">
                <input type="text" 
                       asp-for="LoanRequest.InstitutionName" 
                       id="institution_name" 
                           class="input_group__field" 
                       placeholder=" " 
                       maxlength="200" />
                    <label for="institution_name" class="input_group__label">Kurum Adı</label>
                    <span class="input_group__helper">Çalıştığınız kurumun adını giriniz</span>
            </div>

                <div class="input_group">
                <input type="text" 
                       asp-for="LoanRequest.Position" 
                       id="position" 
                           class="input_group__field" 
                       placeholder=" " 
                       maxlength="100" />
                    <label for="position" class="input_group__label">Görev</label>
                    <span class="input_group__helper">Görev unvanınızı giriniz</span>
            </div>
        </div>

        <!-- Açıklama (Opsiyonel) -->
            <div class="input_group">
            <textarea asp-for="LoanRequest.Description" 
                      id="loan_description" 
                          class="input_group__field input_group__field--textarea" 
                      placeholder=" " 
                      maxlength="500"
                      rows="4"></textarea>
                <label for="loan_description" class="input_group__label">Açıklama (Opsiyonel)</label>
                <span class="input_group__helper">Maksimum 500 karakter (<span id="char_count">0</span>/500)</span>
        </div>

        <!-- Submit Button -->
            <button type="submit" id="submit_btn" class="btn_primary">
                <span id="submit_btn_text">Devam Et</span>
                <span id="submit_btn_loading" style="display: none;">
                    Lütfen Bekleyin...
                </span>
            </button>
        </form>
        </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="~/js/loan_apply.js"></script>
}
