@page
@model InteraktifKredi.Web.Pages.Auth.OtpVerifyModel
@{
    ViewData["Title"] = "SMS Doğrulama";
    Layout = null;
}

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - İnteraktif Kredi</title>
    <link rel="stylesheet" href="~/css/main.css" />
</head>
<body>
    <div class="otp_page">
        <!-- Background Image with Blur -->
        <div class="otp_background"></div>

        <!-- OTP Modal Card -->
        <div class="otp_modal">
            <div class="otp_content">
                <!-- Phone Illustration -->
                <div class="otp_illustration">
                    <svg class="otp_illustration__icon" width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <!-- Phone Frame -->
                        <rect x="35" y="10" width="50" height="90" rx="5" fill="#0066CC" opacity="0.1"/>
                        <rect x="37" y="12" width="46" height="86" rx="4" fill="white"/>
                        
                        <!-- Screen -->
                        <rect x="40" y="20" width="40" height="60" rx="2" fill="#E8F2FF"/>
                        
                        <!-- Message Icon -->
                        <path d="M50 40 L70 40 C71 40 72 41 72 42 L72 52 C72 53 71 54 70 54 L62 54 L60 58 L58 54 L50 54 C49 54 48 53 48 52 L48 42 C48 41 49 40 50 40 Z" fill="#0066CC"/>
                        
                        <!-- Message Lines -->
                        <line x1="52" y1="45" x2="68" y2="45" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
                        <line x1="52" y1="49" x2="64" y2="49" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
                        
                        <!-- Signal Waves -->
                        <path d="M25 30 Q20 35 25 40" stroke="#0066CC" stroke-width="2" stroke-linecap="round" fill="none" opacity="0.5"/>
                        <path d="M20 30 Q13 35 20 40" stroke="#0066CC" stroke-width="2" stroke-linecap="round" fill="none" opacity="0.3"/>
                        <path d="M95 30 Q100 35 95 40" stroke="#0066CC" stroke-width="2" stroke-linecap="round" fill="none" opacity="0.5"/>
                        <path d="M100 30 Q107 35 100 40" stroke="#0066CC" stroke-width="2" stroke-linecap="round" fill="none" opacity="0.3"/>
                    </svg>
                </div>

                <!-- Title -->
                <h3 class="otp_title">SMS onayı</h3>

                <!-- Description -->
                <p class="otp_description">
                    Giriş yapmak için lütfen <strong>@Model.MaskedGSM</strong> nolu cep telefonuna gönderdiğimiz şifreyi yazın.
                </p>

                <!-- Hata Mesajı -->
                @if (!string.IsNullOrEmpty(Model.ErrorMessage))
                {
                    <div class="alert alert--error">
                        @Model.ErrorMessage
                    </div>
                }

                <!-- Validation Summary -->
                <div asp-validation-summary="ModelOnly" class="alert alert--error"></div>

                <!-- OTP Form -->
                <form method="post" class="otp_form" novalidate>
                    <!-- SMS Code Input -->
                    <div class="input_group" id="code_group">
                        <input asp-for="Code" 
                               type="text" 
                               id="code" 
                               class="input_group__field" 
                               placeholder=" " 
                               maxlength="6" 
                               autocomplete="off"
                               inputmode="numeric"
                               pattern="[0-9]*"
                               autofocus />
                        <label for="code" class="input_group__label">SMS Şifresini Girin</label>
                        <span asp-validation-for="Code" class="input_group__error"></span>
                    </div>

                    <!-- Timer -->
                    <div class="otp_timer">
                        <svg class="otp_timer__icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M8 4V8L10.5 10.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <span class="otp_timer__text">SMS giriş süresi: <span id="timer_value">180</span> saniye</span>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" class="btn_primary">
                        Devam Et
                    </button>

                    <!-- Resend Link -->
                    <div class="otp_resend">
                        <span class="otp_resend__text">Kodu almadınız mı?</span>
                        <button type="button" class="otp_resend__link" id="resend_code" disabled>
                            Tekrar Gönder
                        </button>
                    </div>
                </form>

                <!-- Back to Login -->
                <div class="otp_back">
                    <a asp-page="/Auth/Login" class="otp_back__link">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Giriş sayfasına dön
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/js/otp_verify.js"></script>
</body>
</html>

