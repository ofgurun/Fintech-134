<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - İnteraktif Kredi Dashboard</title>
    <link rel="stylesheet" href="~/css/main.css?v=@DateTime.Now.Ticks" />
</head>
<body class="dashboard_layout">
    <!-- ========================================================================
         SIDEBAR (Sol Menü)
    ======================================================================== -->
    <aside class="dashboard_sidebar" id="dashboard_sidebar">
        <!-- Logo -->
        <div class="dashboard_sidebar__logo">
            <div class="dashboard_sidebar__logo_icon">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="20" cy="20" r="20" fill="#0056B3"/>
                    <path d="M12 20L18 26L28 14" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <div class="dashboard_sidebar__logo_text_container">
                <span class="dashboard_sidebar__logo_text_line1">interaktif</span>
                <span class="dashboard_sidebar__logo_text_line2">kredi</span>
            </div>
        </div>

        <!-- Navigation Menu -->
        <nav class="dashboard_sidebar__nav">
            @{
                var currentPagePath = ViewContext.RouteData.Values["page"]?.ToString() ?? "";
                var isHomeActive = currentPagePath.Equals("/Dashboard/Index", StringComparison.OrdinalIgnoreCase) || 
                                  currentPagePath.Equals("/Dashboard", StringComparison.OrdinalIgnoreCase);
                var isReportsActive = currentPagePath.Equals("/Dashboard/Reports", StringComparison.OrdinalIgnoreCase);
                var isLoanApplyActive = currentPagePath.Equals("/Loan/Apply", StringComparison.OrdinalIgnoreCase);
                var isProfileActive = currentPagePath.Equals("/Dashboard/Profile", StringComparison.OrdinalIgnoreCase);
                var isHelpActive = currentPagePath.Equals("/Dashboard/Help", StringComparison.OrdinalIgnoreCase);
            }
            <ul class="dashboard_sidebar__menu">
                <!-- Ana Menü -->
                <li class="dashboard_sidebar__menu_item @(isHomeActive ? "dashboard_sidebar__menu_item--active" : "")">
                    <a asp-page="/Dashboard/Index" class="dashboard_sidebar__menu_link">
                        <svg class="dashboard_sidebar__menu_icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M3 5C3 3.89543 3.89543 3 5 3H7C8.10457 3 9 3.89543 9 5V7C9 8.10457 8.10457 9 7 9H5C3.89543 9 3 8.10457 3 7V5Z" fill="currentColor"/>
                            <path d="M11 5C11 3.89543 11.8954 3 13 3H15C16.1046 3 17 3.89543 17 5V7C17 8.10457 16.1046 9 15 9H13C11.8954 9 11 8.10457 11 7V5Z" fill="currentColor"/>
                            <path d="M3 13C3 11.8954 3.89543 11 5 11H7C8.10457 11 9 11.8954 9 13V15C9 16.1046 8.10457 17 7 17H5C3.89543 17 3 16.1046 3 15V13Z" fill="currentColor"/>
                            <path d="M13 11C11.8954 11 11 11.8954 11 13V15C11 16.1046 11.8954 17 13 17H15C16.1046 17 17 16.1046 17 15V13C17 11.8954 16.1046 11 15 11H13Z" fill="currentColor"/>
                        </svg>
                        <span class="dashboard_sidebar__menu_text">Ana Menü</span>
                    </a>
                </li>

                <!-- Raporlarım -->
                <li class="dashboard_sidebar__menu_item @(isReportsActive ? "dashboard_sidebar__menu_item--active" : "")">
                    <a asp-page="/Dashboard/Reports" class="dashboard_sidebar__menu_link">
                        <svg class="dashboard_sidebar__menu_icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M4 4C4 2.89543 4.89543 2 6 2H14C15.1046 2 16 2.89543 16 4V16C16 17.1046 15.1046 18 14 18H6C4.89543 18 4 17.1046 4 16V4Z" fill="currentColor"/>
                            <path d="M6 6H14M6 9H14M6 12H10" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <span class="dashboard_sidebar__menu_text">Raporlarım</span>
                    </a>
                </li>

                <!-- Kredi Başvurusu -->
                <li class="dashboard_sidebar__menu_item @(isLoanApplyActive ? "dashboard_sidebar__menu_item--active" : "")">
                    <a asp-page="/Loan/Apply" class="dashboard_sidebar__menu_link">
                        <svg class="dashboard_sidebar__menu_icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M2 5C2 3.89543 2.89543 3 4 3H16C17.1046 3 18 3.89543 18 5V15C18 16.1046 17.1046 17 16 17H4C2.89543 17 2 16.1046 2 15V5Z" fill="currentColor"/>
                            <path d="M2 7H18M6 11H10" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <span class="dashboard_sidebar__menu_text">Kredi Başvurusu</span>
                    </a>
                </li>

                <!-- Profil & Ayarlar -->
                <li class="dashboard_sidebar__menu_item @(isProfileActive ? "dashboard_sidebar__menu_item--active" : "")">
                    <a asp-page="/Dashboard/Profile" class="dashboard_sidebar__menu_link">
                        <svg class="dashboard_sidebar__menu_icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M10 9C11.6569 9 13 7.65685 13 6C13 4.34315 11.6569 3 10 3C8.34315 3 7 4.34315 7 6C7 7.65685 8.34315 9 10 9ZM3 18C3 14.134 6.13401 11 10 11C13.866 11 17 14.134 17 18H3Z" fill="currentColor"/>
                        </svg>
                        <span class="dashboard_sidebar__menu_text">Profil & Ayarlar</span>
                    </a>
                </li>

                <!-- Yardım Merkezi -->
                <li class="dashboard_sidebar__menu_item @(isHelpActive ? "dashboard_sidebar__menu_item--active" : "")">
                    <a asp-page="/Dashboard/Help" class="dashboard_sidebar__menu_link">
                        <svg class="dashboard_sidebar__menu_icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M18 10C18 14.4183 14.4183 18 10 18C5.58172 18 2 14.4183 2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10ZM11 6C11 6.55228 10.5523 7 10 7C9.44772 7 9 6.55228 9 6C9 5.44772 9.44772 5 10 5C10.5523 5 11 5.44772 11 6ZM9 9C8.44772 9 8 9.44772 8 10C8 10.5523 8.44772 11 9 11V14C9 14.5523 9.44772 15 10 15H11C11.5523 15 12 14.5523 12 14C12 13.4477 11.5523 13 11 13V10C11 9.44772 10.5523 9 10 9H9Z" fill="currentColor"/>
                        </svg>
                        <span class="dashboard_sidebar__menu_text">Yardım Merkezi</span>
                    </a>
                </li>
            </ul>

            <!-- Çıkış Yap (Alt kısımda) -->
            <div class="dashboard_sidebar__footer">
                <form method="post" asp-page="/Auth/Logout" class="dashboard_sidebar__logout_form">
                    @Html.AntiForgeryToken()
                    <button type="submit" class="dashboard_sidebar__logout_btn">
                        <svg class="dashboard_sidebar__menu_icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M3 3C1.89543 3 1 3.89543 1 5V15C1 16.1046 1.89543 17 3 17H10C11.1046 17 12 16.1046 12 15V12C12 11.4477 11.5523 11 11 11C10.4477 11 10 11.4477 10 12V15H3V5L10 5V8C10 8.55228 10.4477 9 11 9C11.5523 9 12 8.55228 12 8V5C12 3.89543 11.1046 3 10 3H3ZM13 10L16.2929 10L14.1464 7.85355C13.7559 7.46302 13.7559 6.82986 14.1464 6.43934C14.537 6.04881 15.1701 6.04881 15.5607 6.43934L19.0607 9.93934C19.4512 10.3299 19.4512 10.963 19.0607 11.3536L15.5607 14.8536C15.1701 15.2441 14.537 15.2441 14.1464 14.8536C13.7559 14.463 13.7559 13.8299 14.1464 13.4393L16.2929 11.2929L13 11C12.4477 11 12 10.5523 12 10C12 9.44771 12.4477 9 13 9Z" fill="currentColor"/>
                        </svg>
                        <span class="dashboard_sidebar__menu_text">Çıkış Yap</span>
                    </button>
                </form>
            </div>
        </nav>
    </aside>

    <!-- ========================================================================
         MAIN CONTENT AREA
    ======================================================================== -->
    <div class="dashboard_main">
        <!-- Top Header -->
        <header class="dashboard_header">
            @{
                var currentPage = ViewContext.RouteData.Values["page"]?.ToString() ?? "";
                var isHomePage = currentPage.Equals("/Dashboard/Index", StringComparison.OrdinalIgnoreCase) || 
                                 currentPage.Equals("/Dashboard", StringComparison.OrdinalIgnoreCase);
            }
            @if (isHomePage)
            {
            <div class="dashboard_header__welcome">
                <h1 class="dashboard_header__title">Hoşgeldiniz, Batuhan Keser</h1>
                <p class="dashboard_header__subtitle">Kredi başvuru ve takip işlemlerinizi buradan yönetebilirsiniz.</p>
            </div>
            }
            else
            {
                <div class="dashboard_header__welcome"></div>
            }

        </header>

        <!-- Page Content -->
        <main class="dashboard_content">
            @RenderBody()
        </main>
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/js/dashboard.js"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>

